[TOC]

## **一 什么是合约交易？**

1 合约交易是指买**卖双方对**约定**未来某个时间**按指定价格接收一定数量的某种资产的协议进行交易。 合约交易的买卖对象是由交易所统一制定的标准化合约,交易所规定了其商品种类，交易时间，数量等标准化信息。合约代表了买卖双方所拥有的权利和义务。

简单点说就是 现在约好未来某个时间地点交易一定数量的某种商品。

2 合约交易是一种金融衍生品，相对于现货市场的交易，用户可以在期货合约交易中通过判断涨跌，选择买入做多或卖出做空合约，来获得价格上涨或者下跌带来的收益。

## **二 合约交易的作用？**

标准化合约设计的初衷是为了对冲现货风险而设计的，为了锁定收益成本，对冲现货价格大幅波动的风险，从事大宗商品买卖的公司或个人会在期货市场下相同头寸的空单（多单），用来抵御风险。

比特币为代表的数字资产合约交易通常采取价差交割，在合约到期时，系统会对所有没有平仓位以交割价格进行交割结算。

## **三 合约交易的规则**

**1 交易时间**

合约交易是7*24小时交易，只有在每周五16:00（UTC+8）结算或交割期间会中断交易。合约在交割前最后10分钟，只能平仓，不能开仓。

**2 交易类型**

交易类型分为两类，开仓和平仓。开仓和平仓，又分买入和卖出两个方向：

买入开多（看涨）是指当用户对指数看多、看涨时，新买入一定数量的某种合约。进行“买入开多”操作，撮合成功后将增加多头仓位。

卖出平多（多单平仓）是指用户对未来指数行情不再看涨而补回的卖出合约，与当前持有的买入合约对冲抵消退出市场。进行“卖出平多”操作，撮合成功后将减少多头仓位。

卖出开空（看跌）是指当用户对指数看空、看跌时，新卖出一定数量的某种合约。进行“卖出开空”操作，撮合成功后将增加空头仓位。

买入平空（空单平仓）是指用户对未来指数行情不再看跌而补回的买入合约，与当前持有的卖出合约对冲抵消退出市场。进行“买入平空”操作，撮合成功后将减少空头仓位。

**3 下单方式**

限价委托：用户需要自己指定下单的价格和数量。开仓和平仓都可以使用限价委托。

对手价下单：用户如果选择对手价下单，则用户只能输入下单数量，不能再输入下单价格。系统会在接收到此委托的一瞬间，读取当前最新的对手价格（如用户买入，则对手价为卖1价格；若为卖出，则对手价为买1价格），下达一个此对手价的限价委托。

**4 仓位**

用户开仓成交后，即拥有了仓位，同种合约同一方向上的仓位会合并。在一个合约账户中，最多只能有6个仓位，即当周合约多仓、当周合约空仓、次周合约多仓、次周合约空仓、季度合约多仓、季度合约空仓。

**5 下单限制**

平台对单个用户某个周期合约的持仓数量、单笔开仓/平仓的下单数量会做出限制，防止用户操纵市场。

当用户的持仓数量或委托数量过大，平台认为可能对系统和其他用户产生严重风险时，平台有权要求用户采用包括但不限于撤单，平仓等风控措施。平台有权采用包括但不限于限制总仓位数量，限制总委托数量，限制开仓，撤单，强行平仓等措施进行风险控制。

## **四 保证金**

**1 什么是保证金？**

在虚拟合约市场上，用户只需根据合约价格，按一定比率交纳少量资金作为履行合约的财力担保，便可参与合约的买卖，这种资金就是虚拟合约保证金。

例如 你拿一个BTC 10倍看涨 ，这时候相当于你有10BTC，涨10个点，你就有2个BTC了（实际上是1.909个，具体算法后面讲）。但跌了，就先亏这一个BTC，这个BTC就是保证金。

**2 什么是杠杆？**

杠杆一种常见金融交易制度，即保证金制度。“杠杆”使投资者可交易金额被放大的同时，也使投资者获得的收益和承担的风险加大了。也就是放大了收益和风险。

**3 保证金模式有两种：**

1 全仓模式

用户开仓后,账户内的所有仓位持仓的风险和收益合并计算，持仓需要的保证金，会随着最新成交价的变化而变化。全仓保证金模式下，开仓的要求是开仓后的保证金率不能低于100%。

2 逐仓模式

每个合约的双向持仓将会独立计算其保证金和收益，只有开仓可用保证金大于等于开仓所需的保证金数量，用户才能进行委托。而逐仓保证金时，每个合约的开仓可用保证金可能不一致。


可以这么理解，全仓就是把所有的资金放在了一个池子里面，逐仓就是把部分资金放在了一个池子里，全仓爆仓的话 ，所有资金归零。逐仓爆仓的话，部分资金归零，但是逐仓比全仓更容易爆仓，主要是因为杠杆的原因，同样是10倍杠杆，如果全仓只下单一半资金的话，杠杆则等同于5倍 。

**4 保证金计算公式**

持仓保证金=（合约面值*持仓合约数量）/最新成交价/杠杆倍数

例如 现在BTC的最新价格为4000USD ，杠杆倍数为10， BTC的合约面值为100USD，买入开多40张，持仓保证金=（100*40）/4000/10=0.1BTC

也就是 在4000USD的价格 买入开多40张 ，下单0.1BTC 10倍杠杆，就相当于下单了1BTC。

**5 保证金率：**

保证金率是衡量用户资产风险的指标，保证金率越小，账户的风险越高。当保证金率小于等于0时，您的仓位将会被系统强制平仓。

保证金率 =（账户权益/占用保证金）* 100% - 调整系数

占用保证金 = 持仓保证金 + 冻结保证金

调整系数，为防止用户穿仓而设计。每一个品种的每一个杠杆倍数，都有一个对应的调整系数。如 BTC合约10倍杠杆调整系数为15%，20倍杠杆调整系数为 30%，5倍杠杆的调整系数为8%。

例如：

用户合约账户权益有2BTC，在价格为5000USD/BTC开多100张季度合约（合约面值为100USD），杠杆倍数为10倍，调整系数为15%，在不考虑成交手续费的情况下，该用户的强制平仓价为2537.5。

## **五 账户权益及盈亏计算**

**1 合约账户权益**

合约账户权益，为该币种合约账户的总权益。

合约账户权益 = 账户余额 + 本周已实现盈亏+本周未实现盈亏

**2 账户余额**

账户余额是指用户在合约账户所持有的币种数量，即币币账户转入合约账户的币种数量。清 算时，用户交易所产生的的已实现盈亏将在该项上增减。

**3 未实现盈亏**

未实现盈亏，是用户当前持有的仓位的盈亏，未实现盈亏会随着最新成交价格变动而变化。

多仓未实现盈亏 =（1/持仓均价 - 1/最新成交价）* 多仓合约张数 * 合约面值

空仓未实现盈亏 =（1/最新成交价 - 1/持仓均价）* 空仓合约张数 * 合约面值

例如：

如用户持有100张BTC季度合约多仓仓位（合约面值为100USD），持仓均价为5000 USD/BTC。若当前最新价格为 8000USD/BTC，则现在的未实现盈亏=（1/5000-1/8000）*100*100 = 0.75BTC。

从公式的数学形态上来看，不是很容易理解算法。之前也有很多小伙伴不理解 ，明明是10倍开多，为什么涨了10个点 ，我的收益没有达到百分之100%，总觉得交易所是不是又坑我 。

我是这样理解的 ：

在比特币价格为4000USD的时候 ，你拿了一个比特币来期货这个大赌场玩，赌场就按照你拿了4000USD进来 ，比如你10倍梭哈压大（开多），价格涨了10% 到4400USD，此时 赌场要赔你 4000*10*0.1=4000USD。但你进赌场给的筹码是BTC，现在也要还BTC给你。此时比特币价格为4400，所以你得到的比特币是4000/4400=0.9090BTC。

收益率就是0.9090/1*100%=90.9%

从新整理：

持仓均价：4000USD

最新成交价：4400USD

涨跌幅：(4400-4000)/4400*100%=10%

多仓合约张数：1*10*4000/100=400张 （下单比特币个数*杠杆倍数*持仓均价/合约面值）

持仓价值：1*10*4000=40000USD （下单比特币个数*杠杆倍数*持仓均价）

开仓保证金：1BTC （开仓张数*合约面值/杠杆倍数/持仓均价）

USD收益：40000 * 10% =4000USD 持仓价值*涨跌幅

BTC收益：40000 * 10% /4400= 0.909BTC 持仓价值*涨跌幅/最新成交价

USD收益率：(4400-4000)/4400*100%=10% （ 涨跌幅）

BTC收益率：40000 * 10% /4400/1 *100% =90.9% (BTC收益/开仓保证金)

看完上面的公式有木有感觉更晕了 。

![img](https://tva1.sinaimg.cn/large/0081Kckwly1gmckv4s16wj30qu0blq3u.jpg)



**4 已实现盈亏**

已实现盈亏，是用户已平仓仓位产生的盈亏，以及交易产生的手续费，并且尚未通过清算计算账户余额之中的盈亏。**已实现盈亏在合约结算/交割前不能转出合约账户**。

每笔平仓的已实现盈亏：

多仓已实现盈亏 =（1/持仓均价 - 1/平仓成交均价）* 平多仓合约张数 * 合约面值

空仓已实现盈亏 =（1/平仓成交均价 - 1/持仓均价）* 平空仓合约张数 * 合约面值

已实现盈亏与未实现盈亏 相对比 就是已经平仓结算的盈亏 ，所以计算公式的区别就是 按照最新价和平仓成交均价来计算的区别。



## **六 合约结算/交割问题**

**1 结算和交割的区别？**

1 结算价格和交割价格计算方式不同

2 结算规则和交割规则不同

3 给用户感觉最大区别是： 结算后仓位还在，交割后就自动平仓了。

**2 结算：**

1 结算时间： 北京时间 每周周五16：00

2 结算价格：系统取该合约结算前最后一个小时的数量加权成交均价作为结算价格进行结算

3 结算规则：

**当周无负债结算制度**

系统采用当周无负债结算制度，当周交割合约不参与当周无负债结算。

当周无负债结算制度的意义在于将用户的盈利变为余额，使得盈利用户可以将盈利部分提走，结算并不会改变用户的实际盈亏情况，结算前与结算后用户的权益不会发生变化。

结算时将发生如下变化：

1. 系统将根据结算价，计算用户需要结算的未实现盈亏，然后将未实现盈亏合并到已实现盈亏中，已实现盈亏在参与分摊后将转入账户余额
2. 结算后，合约的持仓均价将变为此次的结算价格。此后的未实现盈亏将根据新的结算价格进行计算。

**3 交割：**

1 结算时间： 该合约最后一周的周五16:00（UTC+8）

2 结算价格：系统以交割前最后一小时BTC等币种美元指数的算术平均值作为交割价格。

3 交割规则：

合约在到期时，会进行交割。系统采用价差交割（现金交割）方式。

系统会将到期未平仓合约，以交割价格进行平仓。

平仓产生的盈亏计入已实现盈亏。

交割会产生手续费，此手续费也会计入已实现盈亏。

合约在交割前最后10分钟，只能平仓，不能开仓。


七 **风险准备金**

风险准备金，用于应付因强平单未能平出而产生的穿仓损失 。

每一个种合约品种，都有一个风险准备金。同一品种不同周期的合约共享同一个风险准备金。 如 BTC 周合约、次周合约、季度合约，共享同一个 BTC 风险准备金。

系统会在对用户进行强平仓时，接管用户的仓位，并在市场上进行平仓。平仓成交产生的盈利，会注入到相应品种的风险准备金。系统会在初始交易或者特殊情况下，手动划转到风险账户，部分资产用于增资风险准备金。

风险准备金使用：在进行每周结算以及交割时，如果有系统强平单未能平出，产生了穿仓亏损，则会由风险准备金优先进行赔偿，风险准备金不足以赔偿的部分，将进入分摊步骤进行分摊。


**八 分摊机制**

当市场行情波动较大，用户强制平仓后，按照强平价格无法成交时，导致亏损范围大于风险准备金。平台采用“分摊”制度，从本周盈利的账户中，每个账户按盈利等比分摊穿仓部分的损失。

**1 全账户分摊制度**

将所有强平单产生的穿仓亏损合并统计，并按照三个合约类型（即周，次周，季度合约）的盈利账户的所有收益作为分摊基数进行分摊。

分摊系数=穿仓亏损/所有盈利用户的收益之和

例：在周五进行结算/交割时，BTC当周，次周和季度合约的强平单一共有-120BTC的亏损。

首先用风险准备金进行填补，若填补完后还有-20BTC亏损。则需要由BTC合约盈利账户进行分摊。

假设盈利账户的所有收益为400000BTC，则分摊系数为20/400000=1/20000

某账户本周的当周，次周，与季度合约一共盈利2BTC，则该账户需要分摊的数量为2*(1/20000)=0.0001BTC

##  **九 合约限价机制：**

为防止恶意操纵市 ，不同品种合约的开仓及平仓价格进行限制。

**例如BTC季度合约限价**

合约生成10分钟内(无基差限价时)：

最高价=现货指数（1 + 0.5%）；

最低价=现货指数（1 - 0.7%）；

合约生成了10分钟后（有基差限价时）：

如果（近10分钟基差平均值+现货指数）>现货指数 *（1 + 3%），则基差基准=现货指数 *（1 + 3%）；（）

如果（近10分钟基差平均值+现货指数）< 现货指数 *（1 – 4%），则基差基准=现货指数 *（1 – 4%）；

如果[现货指数 *（1 + 3%）]>（近10分钟基差平均值+现货指数）> 现货指数 *（1 – 4%）,则基差基准 =近10分钟基差平均值+现货指数

最高价=min (基差基准*（1+2.5%）,现货指数 *（1 + 3%）)

最低价=max (基差基准*（1-3.5%）,现货指数 *（1 - 4%）)

以上规则，开平仓都受限制，若开多或平空，当委托价高于最高买价，则将触发硬性限价；若开空或平多，当委托价低于最低卖价，则将触发硬性限价。

**十 合约品种要素**

![img](https://tva1.sinaimg.cn/large/0081Kckwly1gmckv26mxpj30u01mye3n.jpg)



https://zhuanlan.zhihu.com/p/58963815?utm_source=qq&utm_medium=social&utm_oi=632533881908236288