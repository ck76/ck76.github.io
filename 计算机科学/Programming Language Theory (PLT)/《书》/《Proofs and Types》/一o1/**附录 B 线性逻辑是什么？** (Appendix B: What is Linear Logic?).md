[toc]



# **附录B 什么是线性逻辑？**

**作者：Yves Lafont**

---

线性逻辑最初在一致性语义（见第12章）中被发现。现在，它被认为是解决证明论和计算机科学中基本问题的一种有前途的方法。

---

## **B.1 经典逻辑并非构造性的**

### **解释**

**经典逻辑**（无论是经典的还是直觉主义的）允许你对假设进行任意次数的使用：这一特性通过序列演算（Sequent Calculus）中的**弱化规则**（Weakening）和**收缩规则**（Contraction）来表达。

然而，这带来了某些问题：

- **从证明论的角度**，经典逻辑存在一些病态的情况（将在下一节讨论），这使得逻辑推理的过程变得复杂。
- **从计算机科学的角度**，它在处理惰性求值、副作用和内存分配等问题时显得不足。

因此，考虑一种没有弱化和收缩规则的逻辑是有意义的，这就引出了**线性逻辑**。

### **经典逻辑的非构造性**

**直觉主义逻辑**被称为**构造性的**，因为它存在**证明与算法的对应关系**（Curry-Howard 对应，见第3章）。例如，如果我们证明了公式 $\exists n \in \mathbb{N}. P(n)$，那么我们可以实际地给出一个满足性质 $P$ 的整数 $n$。

但是，在**经典逻辑**中，这种解释方式不可行：

- **没有合理的方法**将证明视为算法。
- 事实上，经典逻辑没有指称语义（denotational semantics），除非我们采用一种**平凡的**方法，即将所有相同类型的证明都视为相同。
- 这与**割（cut）消除**的非确定性行为有关（见第13章）。

### **割消除中的非确定性**

考虑在割消除过程中，我们有两种不同的方式来简化一个割：

$$
\frac{A \vdash C \quad B, C \vdash E}{A, B \vdash E} \quad (\text{Cut})
$$

当公式 $C$ 在左右两侧都是通过**弱化**（weakening）或**收缩**（contraction）引入时，情况尤其复杂。

例如，对于以下证明：

1. 从 $A \vdash B$ 推导出 $A \vdash C, B$（通过右弱化 $RW$）。
2. 从 $D \vdash E$ 推导出 $D, C \vdash E$（通过左弱化 $LW$）。
3. 通过割（Cut）将它们合并为 $A, D \vdash B, E$。

在简化过程中，我们可以有两种选择：

- **第一种方式**：首先处理左侧，直接得到 $A, D \vdash B, E$。
- **第二种方式**：首先处理右侧，同样得到 $A, D \vdash B, E$。

但是，这两种方式的过程不同，导致我们无法确定唯一的简化结果。

### **证明的不可区分性**

特别地，如果我们有两个证明 $\pi$ 和 $\pi'$，都证明了同一个公式 $B$，并且 $C$ 是任意公式，那么以下证明：

1. 使用 $\pi$ 得到 $\vdash B$，然后通过右弱化得到 $\vdash C, B$。
2. 使用 $\pi'$ 得到 $\vdash B$，然后通过左弱化得到 $C \vdash B$。
3. 通过割（Cut）得到 $\vdash B, B$。
4. 最后，通过右收缩（$RC$）得到 $\vdash B$。

在割消除的过程中，可能会简化为 $\pi$ 或 $\pi'$，但实际上，由于弱化和收缩的存在，我们无法区分这两个证明。

**结论**：在经典逻辑中，所有的证明都被视为相同，即对于给定的序列 $A \vdash B$，所有的证明都被识别为同一个。这使得经典逻辑从算法的角度看是**不一致的**，因为它缺乏区分不同算法的能力。

---

## **B.2 线性序列演算**

### **引入**

为了避免上述的病态情况，我们可以：

- **取消结构规则**：移除弱化和收缩规则，只保留交换规则（它是无害的）。
- **调整逻辑规则**：因为一些逻辑规则依赖于弱化和收缩，我们需要对它们进行修改。

### **两个新的合取**

由于弱化和收缩的移除，传统的合取规则不再适用。为此，我们引入两个新的合取：

1. **张量积（Tensor Product）或累积合取（Cumulative Conjunction）**，记作 $\otimes$。

   - **左规则（$L\otimes$）**：
     $$
     \frac{A, C, D \vdash B}{A, C \otimes D \vdash B}
     $$
   - **右规则（$R\otimes$）**：
     $$
     \frac{A \vdash C, B \quad A' \vdash D, B'}{A, A' \vdash C \otimes D, B, B'}
     $$

2. **直积（Direct Product）或选择合取（Alternative Conjunction）**，记作 $N$。

   - **左规则1（$L1N$）**：
     $$
     \frac{A, C \vdash B}{A, C \, N \, D \vdash B}
     $$
   - **左规则2（$L2N$）**：
     $$
     \frac{A, D \vdash B}{A, C \, N \, D \vdash B}
     $$
   - **右规则（$RN$）**：
     $$
     \frac{A \vdash C, B \quad A \vdash D, B}{A \vdash C \, N \, D, B}
     $$

### **引入线性否定**

为了进一步简化规则，我们引入**线性否定**：

- **基本定义**：每个原子公式都有两种形式：正的（$A$）和负的（$A^\perp$）。定义 $A$ 的线性否定为 $A^\perp$，且 $A^{\perp\perp} = A$。
- **合成公式的否定**遵循德摩根律（de Morgan's laws）：
  - $(A \otimes B)^\perp = A^\perp \,\&\, B^\perp$，其中 $\&$ 是张量和（Tensor Sum）。
  - $(A \, N \, B)^\perp = A^\perp \oplus B^\perp$，其中 $\oplus$ 是直和（Direct Sum）。
  - 其他类似的规则。

### **调整序列**

传统的双边序列：

$$
A_1, ..., A_n \vdash B_1, ..., B_m
$$

被替换为：

$$
\vdash A_1^\perp, ..., A_n^\perp, B_1, ..., B_m
$$

这样，我们的**身份公理（Identity Axiom）**变为：

$$
\vdash A^\perp, A
$$

**割规则（Cut Rule）**变为：

$$
\frac{\vdash C, A \quad \vdash C^\perp, B}{\vdash A, B}
$$

### **逻辑规则的表示**

使用这种表示，我们可以简化逻辑规则。例如，张量积的规则变为：

- **张量积规则**：
  $$
  \frac{\vdash C, A \quad \vdash D, B}{\vdash C \otimes D, A, B}
  $$

- **张量和规则**：
  $$
  \frac{\vdash C, D, A}{\vdash C \,\&\, D, A}
  $$

- **直积规则**：
  $$
  \frac{\vdash C, A \quad \vdash D, A}{\vdash C \, N \, D, A}
  $$

- **直和规则**：
  $$
  \frac{\vdash C, A}{\vdash C \oplus D, A} \quad \text{或} \quad \frac{\vdash D, A}{\vdash C \oplus D, A}
  $$

### **单位元的引入**

为了完善逻辑系统，我们引入**单位元**：

- **对于 $\otimes$**：单位元是 $1$，且 $1^\perp = \bot$。
- **对于 $\&$**：单位元是 $\bot$，且 $\bot^\perp = 1$。
- **对于 $N$**：单位元是 $\top$，且 $\top^\perp = 0$。
- **对于 $\oplus$**：单位元是 $0$，且 $0^\perp = \top$。

对应的规则为：

- **单位元规则**：
  - $\vdash 1$
  - $\vdash \bot, A$
  - $\vdash \top, A$
  - 对于 $0$，没有规则。

### **引入模态算子**

为了恢复结构规则的功能，我们引入**模态算子**：

- **$!A$**（“当然 $A$”，of course $A$）
- **$?A$**（“为什么不 $A$”，why not $A$）

它们满足以下性质：

- $( ! A)^\perp = ? A^\perp$
- $( ? A)^\perp = ! A^\perp$

对应的规则包括：

- **模态规则（$!$）**：
  $$
  \frac{\vdash B, ? A}{\vdash ! B, ? A}
  $$

- **弱化（$W?$）**：
  $$
  \frac{\vdash A}{\vdash ? B, A}
  $$

- **收缩（$C?$）**：
  $$
  \frac{\vdash ? B, ? B, A}{\vdash ? B, A}
  $$

- **弃置（Dereliction，$D?$）**：
  $$
  \frac{\vdash B, A}{\vdash ? B, A}
  $$

其中，弃置规则相当于公理 $B \vdash ? B$，或者对偶地 $! B \vdash B$。

### **线性逻辑与直觉主义逻辑的联系**

通过引入模态算子，我们可以将**直觉主义公式**表示为线性逻辑中的公式，例如：

- **合取**：$A \wedge B = A \, N \, B$
- **析取**：$A \vee B = ! A \oplus ! B$
- **蕴涵**：$A \Rightarrow B = ! A \multimap B$，其中 $\multimap$ 表示线性蕴涵。

这样，一个直觉主义公式是有效的，当且仅当它的线性逻辑翻译在线性序列演算中是可证明的。

### **总结**

通过上述调整，我们构建了一个没有弱化和收缩规则的逻辑系统，即**线性逻辑**。它解决了经典逻辑中的病态情况，并为处理计算机科学中的一些问题提供了新的方法。

---

## **线性逻辑的意义**

### **证明论的角度**

- **消除了病态情况**：线性逻辑避免了经典逻辑中由于弱化和收缩导致的非确定性问题。
- **引入新的不变量**：如**证明网（proof nets）**，提供了对证明结构的更好理解。

### **计算机科学的角度**

- **处理惰性求值和副作用**：线性逻辑为这些问题提供了新的视角。
- **内存分配和并行计算**：通过严格控制资源的使用，线性逻辑在这些领域有潜在的应用。

---

**如果您对某个部分有疑问，或者希望进一步解释某些概念，请告诉我！**

### ---------------------------

# **附录B 什么是线性逻辑？**

**作者：Yves Lafont**

---

## **B.3 证明网（Proof Nets）**

### **解释**

#### **背景介绍**

在这一部分中，我们将重点关注**线性逻辑**中的**乘法片段**（multiplicative fragment），也就是连接词 $\otimes$、$1$、$O$ 和 $\bot$。在这个片段中，规则对上下文是保守的：结论中的上下文是前提的**不交并集**（disjoint union）。这意味着在推导过程中，上下文不会发生交叠或重复。

- **乘法片段**：只包含 $\otimes$、$1$、$O$ 和 $\bot$ 这四个连接词。
- **上下文的保守性**：推导规则不会改变上下文的内容，只是将前提的上下文合并到结论中。

**注意**：对于连接词 $N$ 和 $>$ 的规则并非如此，它们不满足上下文的保守性。如果我们放弃这些连接词，我们也必须放弃它们的对偶 $\oplus$ 和 $0$。

#### **算法视角**

从**算法的角度**来看，这个片段的表达能力非常有限，但如果我们想逐步解决问题，这种限制是必要的。

- **限制的必要性**：通过专注于乘法片段，我们可以更深入地理解线性逻辑的基本结构和特性。
- **可扩展性**：此外，乘法连接词和规则可以被推广，形成一个真正的**编程语言**。

**注释**：

- 文章中提到，通过使用一种可扩展的逻辑，程序可以声明自己的连接词（即多态类型）和规则（即构造器和析构器），并描述转换（即程序本身）。割消除实际上是进程之间的并行通信。在这种语言中，逻辑并不确保终止，但确保没有死锁。

#### **消除冗余**

**序列证明**（Sequent proofs）中存在大量的冗余。例如，在以下规则中：

$$
\frac{\vdash C, D, A}{\vdash C \, O \, D, A} \quad (O)
$$

- **上下文 $A$**：在推导过程中，$A$ 起到了一个**被动**的作用，它被原封不动地从前提抄写到结论中。

为了简化，我们希望**消除这些乏味的上下文**，从而得到证明的**精髓**，这被称为**证明网（Proof Net）**。

### **什么是证明网？**

**证明网**是一种图形化的证明结构，它捕捉了线性逻辑证明的核心思想，去除了不必要的冗余信息。

#### **示例**

考虑以下证明：

1. **初始假设**：
   $$
   \vdash A, A^\bot \quad \vdash B, B^\bot
   $$

2. **应用 $\otimes$ 规则**：
   $$
   \frac{\vdash A, A^\bot \quad \vdash B, B^\bot}{\vdash A \otimes B, A^\bot, B^\bot} \quad (\otimes)
   $$

3. **再次应用 $\otimes$ 规则**：
   $$
   \frac{\vdash A \otimes B, A^\bot, B^\bot \quad \vdash C, C^\bot}{\vdash (A \otimes B) \otimes C, A^\bot, B^\bot, C^\bot} \quad (\otimes)
   $$

4. **合并结论**：
   $$
   \vdash A^\bot, B^\bot, (A \otimes B) \otimes C, C^\bot
   $$

5. **应用 $O$ 规则**：
   $$
   \frac{\vdash A^\bot, B^\bot, (A \otimes B) \otimes C, C^\bot}{\vdash A^\bot \, O \, B^\bot, (A \otimes B) \otimes C, C^\bot} \quad (O)
   $$

**上述证明可以简化为一个证明网，如下图所示**：

```
        A           B
         \         /
        A ⊗ B     C
          \       /
      (A ⊗ B) ⊗ C
          /       \
    A⊥ O B⊥      C⊥
```

**说明**：

- 图中，每个节点代表一个公式或连接词。
- 箭头表示逻辑连接或对偶关系。

#### **另一个可能的证明**

上述证明也可能来自以下推导：

1. **初始假设**：
   $$
   \vdash A, A^\bot \quad \vdash B, B^\bot
   $$

2. **应用 $\otimes$ 规则**：
   $$
   \frac{\vdash A, A^\bot \quad \vdash B, B^\bot}{\vdash A \otimes B, A^\bot, B^\bot} \quad (\otimes)
   $$

3. **合并结论**：
   $$
   \vdash A^\bot, B^\bot, A \otimes B
   $$

4. **应用 $O$ 规则**：
   $$
   \frac{\vdash A^\bot, B^\bot, A \otimes B}{\vdash A^\bot \, O \, B^\bot, A \otimes B} \quad (O)
   $$

5. **应用 $\otimes$ 规则**：
   $$
   \frac{\vdash A \otimes B, A^\bot \, O \, B^\bot \quad \vdash C, C^\bot}{\vdash (A \otimes B) \otimes C, A^\bot \, O \, B^\bot, C^\bot} \quad (\otimes)
   $$

#### **结论**

- **关键点**：我们**失去了**规则的（非本质的）**应用顺序**，但这并不影响证明的有效性。
- **证明网的优势**：它们专注于证明的结构本身，而不是规则应用的顺序。

### **证明网的正式定义**

为了更精确地描述证明网，我们需要一些**正式的定义**。

#### **证明结构**

**证明结构**是由以下组件构建的图：

1. **链接（Link）**：
   - **形式**：
     $$
     A \quad A^\bot
     $$
   - **解释**：链接表示一个原子公式与其对偶之间的关系。

2. **割（Cut）**：
   - **形式**：
     $$
     \frac{}{A \quad A^\bot} \quad (\text{Cut})
     $$
   - **解释**：割连接了一个公式与其对偶，表示一个临时的假设被消耗。

3. **逻辑规则**：
   - **$\otimes$ 规则**：
     $$
     \frac{A \quad B}{A \otimes B}
     $$
   - **$O$ 规则**：
     $$
     \frac{A \quad B}{A \, O \, B}
     $$
   - **单位元**：
     - **$1$**：作为 $\otimes$ 的单位元。
     - **$\bot$**：作为 $O$ 的单位元。

#### **规则说明**

- **每个公式**必须是**恰好一个规则的结论**，并且是**至多一个规则的前提**。
- **结论**：在证明结构中，不作为任何规则前提的公式称为**结论**。
- **链接和割是对称的**：它们在图中具有相似的结构。

### **示例图解**

下面是一些证明网的图形表示：

1. **链接**：

   ```
   A --------- A⊥
   ```

2. **割**：

   ```
   A
    \
     \
      Cut
     /
    /
   A⊥
   ```

3. **$\otimes$ 规则**：

   ```
   A      B
    \    /
     \  /
    A ⊗ B
   ```

4. **$O$ 规则**：

   ```
   A      B
    \    /
     \  /
    A O B
   ```

5. **单位元 $1$ 和 $\bot$**：

   ```
   1       ⊥
   ```

### **证明网的特性**

- **结构简洁**：证明网通过消除重复的上下文，简化了证明的表示。
- **强调关系**：它们强调公式之间的逻辑关系，而不是推导的顺序。

### **正确性判据**

**证明网**和**证明结构**之间有区别。为了判定一个证明结构是否是有效的证明网，我们需要一个**正确性判据**。

#### **长程旅行条件（Long Trip Condition）**

- **定义**：长程旅行条件是一种检验证明网正确性的方法。
- **作用**：它确保证明结构中的连接是合法的，避免了不正确的组合。

**例子**：

- 考虑以下证明结构：

  ```
      A          B
       \        /
        \      /
          A
           \
            \
            A O B
             /
            /
          B⊥
  ```

- **问题**：这个证明结构不是一个有效的证明网，因为它不满足长程旅行条件。

**限制**：

- **注意**：这个判据仅适用于包含 $\otimes$、$O$ 和 $1$ 的逻辑片段，对于 $\bot$ 不适用。

---

**总结**：

- **证明网**提供了一种精炼的方式来表示线性逻辑的证明，去除了冗余的上下文。
- **通过图形化的表示**，我们可以更直观地理解公式之间的逻辑关系。
- **正确性判据**确保了证明网的合法性，避免了错误的连接。

---

**如果您对某个部分有疑问，或者希望进一步解释某些概念，请告诉我！**

### ----------------------------



### ---------------------------



### ----------------------------



### ---------------------------



### ----------------------------



### ---------------------------



### ----------------------------



### ---------------------------



### ----------------------------



### ---------------------------



### ----------------------------