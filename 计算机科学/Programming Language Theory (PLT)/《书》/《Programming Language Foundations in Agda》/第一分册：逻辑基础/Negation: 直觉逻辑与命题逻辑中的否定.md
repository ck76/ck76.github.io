[toc]

以下是本章节涉及的所有数理逻辑相关概念及其解释：

### 1. **否定（Negation, ¬A）**
   - 否定是一个逻辑运算符，表示命题 $A$ 的否定形式，即 $A$ 不成立。否定可以形式化为 $A \rightarrow \bot$，即 $A$ 的成立蕴涵矛盾（$\bot$），因此 $¬A$ 成立。
   - 在类型论中，$¬A$ 表示 $A \rightarrow \bot$ 的函数类型，表示给定 $A$ 成立的证据，可以推导出矛盾（$\bot$）。

### 2. **归谬法（Reductio ad Absurdum）**
   - 归谬法是一种证明方法，通过假设一个命题 $A$ 成立，推导出矛盾，从而得出 $A$ 的否定成立。形式上，$A \rightarrow \bot$ 的证明即是 $¬A$ 的证明。

### 3. **直觉逻辑（Intuitionistic Logic）**
   - 直觉逻辑是逻辑学的一个分支，强调构造性证明，即一个命题的证明必须提供该命题成立的具体证据。与经典逻辑不同，直觉逻辑中不接受排中律（$A \uplus \neg A$）作为公理，除非能具体构造出 $A$ 或 $¬A$ 的证据。

### 4. **经典逻辑（Classical Logic）**
   - 经典逻辑是逻辑学的一个传统分支，其中排中律（Law of Excluded Middle, $A \uplus ¬ A$）总是成立，即对于任意命题 $A$，$A$ 或 $¬A$ 必有一个成立。经典逻辑还接受双重否定消去（$¬¬A \rightarrow A$）的原则。

### 5. **排中律（Law of the Excluded Middle, $A \uplus ¬ A$）**
   - 排中律是经典逻辑中的基本原则之一，断言对于任意命题 $A$，要么 $A$ 成立，要么 $¬A$ 成立。直觉逻辑中不接受排中律作为公理，除非能够具体构造出 $A$ 或 $¬A$ 的证据。

### 6. **双重否定引入（Double Negation Introduction, $A \rightarrow ¬¬A$）**
   - 双重否定引入是指如果 $A$ 成立，那么 $¬¬A$ 也成立，即如果假设 $¬A$ 会导致矛盾，那么 $A$ 成立。此规则在直觉逻辑中有效，但 $¬¬A$ 不蕴涵 $A$。

### 7. **双重否定消去（Double Negation Elimination, $¬¬A \rightarrow A$）**
   - 双重否定消去是经典逻辑中的一个原则，断言如果 $¬¬A$ 成立，那么 $A$ 也成立。此规则在直觉逻辑中不成立，除非有额外的证据表明 $A$ 成立。

### 8. **换质换位律（Contraposition, $(A \rightarrow B) \rightarrow (¬B \rightarrow ¬A)$）**
   - 换质换位律是一个逻辑规则，断言如果 $A$ 蕴涵 $B$，那么 $¬B$ 蕴涵 $¬A$。即通过推理反向得出否定命题之间的关系。

### 9. **不等性（Inequality, $x ≢ y$）**
   - 不等性表示两个对象 $x$ 和 $y$ 不相等，形式化为 $x ≢ y = ¬(x ≡ y)$，即它们相等会导致矛盾。

### 10. **谬误模式（Absurd Pattern）**
   - 谬误模式是一种特殊的模式匹配，用来处理类型为 $\bot$ 的情况。在 Agda 中，当处理不可能成立的类型（如 $1 ≡ 2$ 或 $zero ≡ suc m$）时，使用谬误模式（$\lambda()$）表示没有可能的证据。

### 11. **De Morgan 定律（De Morgan’s Laws）**
   - De Morgan 定律揭示了否定运算与合取、析取之间的关系。两个典型的 De Morgan 定律如下：
     1. $¬(A \uplus B) \equiv (¬A) \times (¬B)$：表示对于 $A$ 和 $B$ 的析取的否定等同于它们各自否定的合取。
     2. $¬(A \times B) \equiv (¬A) \uplus (¬B)$：表示对于 $A$ 和 $B$ 的合取的否定等同于它们各自否定的析取（但在直觉逻辑中，这条定律不成立，只有在经典逻辑中成立）。

### 12. **不可辩驳性（Irrefutability）**
   - 不可辩驳性表示一个命题的否定的否定是可证明的，换句话说，无法证明该命题的否定。例如，在直觉逻辑中，虽然排中律 $A \uplus ¬ A$ 不一定成立，但可以证明其不可辩驳性，即 $¬¬(A \uplus ¬ A)$ 成立。

### 13. **稳定性（Stability）**
   - 稳定性表示对于某个命题 $A$，$¬¬A \rightarrow A$ 成立，即双重否定消去成立的命题称为稳定的。在直觉逻辑中，不是所有命题都是稳定的，但某些命题或其否定是稳定的。

这些概念构成了否定在数理逻辑中的基础，通过这些概念，我们可以理解直觉逻辑和经典逻辑中的差异以及否定运算的深层次性质。



### ----------------------------------

### 否定

#### 概念：否定（Negation）

在逻辑中，给定一个命题 $A$，当 $A$ 不成立时，我们称它的否定形式 $\neg A$ 成立。否定通常被形式化为“蕴涵假”（implication to falsehood），即 $A$ 蕴涵到空类型（$\bot$）。

$$
\neg A = A \rightarrow \bot
$$

这一定义体现了归谬法（Reductio ad Absurdum）：如果从 $A$ 可以推导出矛盾（$\bot$），那么 $A$ 的否定 $\neg A$ 就必定成立。

##### 否定的证据形式

否定 $\neg A$ 成立的证据形式为：

$$
\lambda \{ x \rightarrow N \}
$$

其中 $N$ 是类型为 $\bot$ 的项，包含类型为 $A$ 的自由变量 $x$。换句话说，$\neg A$ 成立的证据是一个函数，它将 $A$ 成立的证据转换为 $\bot$ 成立的证据。

##### 推导矛盾

给定 $\neg A$ 和 $A$ 均成立的证据，我们可以得出 $\bot$ 成立。这意味着，如果 $\neg A$ 和 $A$ 同时成立，那么我们就得到了一个矛盾：

```agda
¬-elim : ∀ {A : Set} → ¬ A → A → ⊥
¬-elim ¬x x = ¬x x
```

在这个定义中，$\neg A$ 的证据被表示为 `¬x`，$A$ 的证据被表示为 `x`。由于 `¬x` 是类型为 $A \rightarrow \bot$ 的函数，因此将 `¬x` 应用到 `x` 上的结果必定是 $\bot$。需要注意的是，此规则只是蕴涵消去（$\rightarrow$-elim）的一个特例。

##### 否定的优先级

我们将否定的优先级设定为高于析取（$\sqcup$）和合取（$\times$），但低于其他运算符。因此，$\neg A \times \neg B$ 解析为 $(\neg A) \times (\neg B)$，而 $\neg m ≡ n$ 解析为 $\neg (m ≡ n)$。

#### 概念：直觉逻辑与经典逻辑中的否定

在经典逻辑中，$A$ 等价于 $\neg \neg A$。然而，在直觉逻辑中，我们只能证明 $A$ 蕴涵 $\neg \neg A$，但不能证明 $\neg \neg A$ 蕴涵 $A$。

##### 证明 $A \rightarrow \neg \neg A$

在直觉逻辑中，我们可以证明 $A$ 蕴涵 $\neg \neg A$：

```agda
¬¬-intro : ∀ {A : Set} → A → ¬ ¬ A
¬¬-intro x  =  λ{¬x → ¬x x}
```

在这个证明中，我们令 $x$ 为 $A$ 的证据。为了证明 $\neg \neg A$ 成立，我们假设 $\neg A$ 成立，并导出一个矛盾。因此，$\neg \neg A$ 必定成立。

同样的证明可以通过更加紧凑的形式表示：

```agda
¬¬-intro′ : ∀ {A : Set} → A → ¬ ¬ A
¬¬-intro′ x ¬x = ¬x x
```

##### 证明 $\neg \neg \neg A \rightarrow \neg A$

虽然在直觉逻辑中无法证明 $\neg \neg A \rightarrow A$，但我们可以证明 $\neg \neg \neg A \rightarrow \neg A$：

```agda
¬¬¬-elim : ∀ {A : Set} → ¬ ¬ ¬ A → ¬ A
¬¬¬-elim ¬¬¬x  =  λ x → ¬¬¬x (¬¬-intro x)
```

在这个证明中，$\neg \neg \neg A$ 的证据被表示为 `¬¬¬x`。我们假设 $A$ 成立，然后通过前面的结果导出 $\neg \neg A$ 成立。接着，通过应用 $\neg \neg \neg A$ 和 $\neg \neg A$ 的证据，我们得出矛盾，因此 $\neg A$ 必定成立。

##### 换质换位律（Contraposition）

换质换位律是另一个重要的逻辑规则，它陈述了若 $A \rightarrow B$ 成立，则 $\neg B \rightarrow \neg A$ 也成立：

```agda
contraposition : ∀ {A B : Set} → (A → B) → (¬ B → ¬ A)
contraposition f ¬y x = ¬y (f x)
```

在这个证明中，我们假设 $f$ 是 $A \rightarrow B$ 的证据，$\neg y$ 是 $\neg B$ 的证据。我们需要证明 $\neg A$ 成立。我们令 $x$ 为 $A$ 的证据，并利用 $f x$ 从 $A$ 推导出 $B$。接着，通过应用 $\neg y$ 和 $f x$，我们从 $B$ 和 $\neg B$ 得到矛盾，因此 $\neg A$ 成立。

##### 定义不等性

我们可以利用否定直接定义不等性：

```agda
_≢_ : ∀ {A : Set} → A → A → Set
x ≢ y  =  ¬ (x ≡ y)
```

要证明不同的数不相等是很简单的：

```agda
_ : 1 ≢ 2
_ = λ()
```

这里，我们使用谬模式（Absurd Pattern）来证明 $1 \neq 2$。由于 $1$ 和 $2$ 可以被化简为不同的正规形式，因此 Agda 判定没有证据可证明 $1 ≡ 2$。

##### 皮亚诺公理的验证

类似地，我们可以验证皮亚诺公理中“零不是任何数的后继数”的假设：

```agda
peano : ∀ {m : ℕ} → zero ≢ suc m
peano = λ()
```

这两者的证明是相同的，因为谬模式会匹配所有类型为 $zero ≡ suc m$ 的可能的证据。

#### 否定的算术解释

鉴于蕴涵和幂运算之间的对应关系，以及没有成员的类型为假，我们可以将否定看作零的幂。算术上，这对应于以下等式：

$$
0^n \equiv 1 \text{ if } n \equiv 0 \quad \text{and} \quad 0^n \equiv 0 \text{ if } n \not\equiv 0
$$

确实，只有一个 $\bot \rightarrow \bot$ 的证明。我们可以用两种方式写出此证明：

```agda
id : ⊥ → ⊥
id x = x

id′ : ⊥ → ⊥
id′ ()
```

利用外延性（extensionality），我们可以证明这两个证明是相等的：

```agda
id≡id′ : id ≡ id′
id≡id′ = extensionality (λ())
```

根据外延性，如果对于两个函数 `id` 和 `id′`，我们可以证明对于任何定义域中的元素 $x$，有 $id\ x \equiv id'\ x$，则我们可以得出结论 $id \equiv id'$。由于这里定义域为空类型 $\bot$，这个相等性是平凡成立的。

实际上，我们可以证明任意两个否定的证明都是相等的：

```agda
assimilation : ∀ {A : Set} (¬x ¬x′ : ¬ A) → ¬x ≡ ¬x′
assimilation ¬x ¬x′ = extensionality (λ x → ⊥-elim (¬x x))
```

对于任意的 $\neg A$ 的证据，由于外延性对所有 $A$ 的成立证据 $x$ 进行全称量化，因此任何这样的 $x$ 都会直接导出矛盾，因此其相等性是平凡成立的。

---

这一节详细介绍了否定在直觉逻辑和经典逻辑中的性质，解释了归谬法、否定的算术解释以及外延性的应用。如果你对这些内容有任何疑问或需要更深入的讨论，请随时告诉我，我会继续为你解答。

### 直觉逻辑与命题逻辑中的否定

#### 直觉逻辑与经典逻辑的差异

在逻辑学中，直觉逻辑和经典逻辑是两种不同的逻辑系统。直觉逻辑关注于构造主义的概念，认为真理应该是可构造的证据，而经典逻辑则允许某些非构造性的证明方法，例如排中律（Law of the Excluded Middle）。

##### 排中律（Law of the Excluded Middle）

排中律是经典逻辑中的一个基本定律，它断言对于任意命题 $A$，$A \sqcup \neg A$ 必定成立。换句话说，任何命题 $A$ 要么为真，要么其否定为真。

```agda
postulate
  em : ∀ {A : Set} → A ⊎ ¬ A
```

然而，在直觉逻辑中，排中律并不成立，因为它没有提供足够的证据来证明 $A$ 或 $\neg A$ 中的哪一个成立。

##### 排中律的不可辩驳性

虽然排中律在直觉逻辑中不可证明，但可以证明它的否定是不可辩驳的，也就是说，我们可以证明它的否定的否定：

```agda
em-irrefutable : ∀ {A : Set} → ¬ ¬ (A ⊎ ¬ A)
em-irrefutable = λ k → k (inj₂ (λ x → k (inj₁ x)))
```

在这里，我们假设有一个函数 $k$，它接受一个类型为 $A \sqcup \neg A$ 的值并返回一个空类型（$\bot$）。我们通过构造出一个矛盾来证明 $¬¬ (A ⊎ ¬ A)$ 成立。这说明，虽然我们无法证明 $A \sqcup \neg A$，但我们也无法证明它的否定，这就是所谓的不可辩驳性。

##### 交互式推导

推导上述证明的过程可以通过交互式的方式逐步展开：

```agda
em-irrefutable k = ?
```

在这里，`k` 是一个函数，它的类型是 $¬ (A ⊎ ¬ A)$，我们需要在 `?` 处填上一个返回空类型（$\bot$）的项。

由于空类型的值只能通过应用 `k` 自身得到，因此我们将 $k$ 应用于它自己：

```agda
em-irrefutable k = k ?
```

接下来，我们需要填上一个类型为 $A \sqcup \neg A$ 的值。由于我们没有类型为 $A$ 的值，因此我们选择处理第二个析取：

```agda
em-irrefutable k = k (inj₂ λ{ x → ? })
```

第二个析取接受一个 $¬ A$ 的证据，即一个函数，它接受类型为 $A$ 的值并返回空类型的值。我们将 $x$ 绑定到类型为 $A$ 的值，然后在 `?` 处填入返回空类型的值：

```agda
em-irrefutable k = k (inj₂ λ{ x → k ? })
```

在这一步中，我们有了一个类型为 $A$ 的值 `x`，因此我们可以继续处理第一个析取：

```agda
em-irrefutable k = k (inj₂ λ{ x → k (inj₁ x) })
```

至此，所有的洞都已填完，证明完成。这一步步的推导展示了如何通过构造矛盾来证明排中律的不可辩驳性。

#### 经典逻辑中的直觉和反例

在经典逻辑中，我们通常认为每个命题要么是真的，要么是假的，这与直觉逻辑中的构造主义概念形成对比。一个有趣的例子可以说明经典逻辑与直觉逻辑的差异：

##### 恶魔的提议

一个恶魔向一个男人提出了如下的提议：

- 选项 (a)：恶魔给你 10 亿美元。
- 选项 (b)：如果你付给恶魔 10 亿美元，恶魔将实现你的任何一个愿望。

恶魔承诺它将决定是提供 (a) 还是 (b)。

虽然男人选择了接受提议，但他永远不知道恶魔会选择 (a) 还是 (b)。这个提议引发了男人的困惑和不安，最终他通过辛苦努力积攒了 10 亿美元并要求恶魔实现他的愿望。出乎意料的是，恶魔告诉他之前选的是 (a)，于是男人得到了他积攒的 10 亿美元。

这个故事揭示了经典逻辑中“排中律”的一种悖论性：即使某个命题（恶魔的选择）最终为真，男人仍然不知道是哪一个为真。这种不确定性正是直觉逻辑所避免的。

---

通过这一节的学习，我们深入了解了直觉逻辑和经典逻辑在处理否定和排中律上的差异，并通过交互式推导演示了如何证明排中律的不可辩驳性。如果你对这些内容有进一步的疑问，或者希望继续深入探讨，请随时告诉我。

### 否定（Negation）

在逻辑中，否定是一个非常重要的概念，它表示命题不成立。直觉逻辑中的否定与经典逻辑中的否定有些不同。本节将详细探讨否定的定义及其在直觉逻辑中的应用。

#### 否定的定义

给定一个命题 $A$，当 $A$ 不成立时，它的否定形式 $\neg A$ 成立。在直觉逻辑中，否定被定义为从命题 $A$ 推导出一个矛盾（$\bot$），即空类型（Empty Type）。这意味着，如果假设 $A$ 成立能导致矛盾，那么 $A$ 就不成立，也就是说 $\neg A$ 成立。

公式上表示为：
$$
\neg A = A \rightarrow \bot
$$

```agda
¬_ : Set → Set
¬ A = A → ⊥
```

在这个定义中，$\neg A$ 是一个从 $A$ 到 $\bot$ 的函数。如果存在一个函数可以从 $A$ 推导出 $\bot$，那么 $A$ 就是错误的，$\neg A$ 就是正确的。

#### 归谬法（Reductio ad Absurdum）

归谬法是证明否定的一种常用方法。如果从假设 $A$ 成立可以导出矛盾（$\bot$），那么 $A$ 就不成立，也就是说 $\neg A$ 成立。

一个 $\neg A$ 成立的证据可以表示为：
$$
\lambda x \rightarrow N
$$
其中，$N$ 是类型为 $\bot$ 的项，它包含类型为 $A$ 的自由变量 $x$。这意味着 $N$ 是一个从 $A$ 到 $\bot$ 的函数，这个函数将 $A$ 的证据转换为 $\bot$ 的证据。

#### 矛盾推导

如果同时存在 $A$ 和 $\neg A$ 的证据，那么我们就可以得出矛盾，即 $\bot$ 成立。这意味着我们可以构造出一个函数，从 $A$ 和 $\neg A$ 导出 $\bot$。

```agda
¬-elim : ∀ {A : Set}
  → ¬ A
  → A
    ---
  → ⊥
¬-elim ¬x x = ¬x x
```

在这个定义中，$¬x$ 是 $\neg A$ 的证据，$x$ 是 $A$ 的证据。因为 $¬x$ 是一个从 $A$ 到 $\bot$ 的函数，因此应用 $¬x$ 到 $x$ 可以得到 $\bot$。注意，这实际上是 $\rightarrow$-消除（$→$-elim）的一个特例。

#### 优先级设定

在直觉逻辑中，否定的优先级设定为高于析取和合取，但低于其他运算符。这意味着表达式 $¬ A \times ¬ B$ 将解析为 $(¬ A) \times (¬ B)$，而 $¬ m ≡ n$ 将解析为 $¬ (m ≡ n)$。

```agda
infix 3 ¬_
```

#### 双重否定导入（Double Negation Introduction）

在经典逻辑中，$A$ 等价于 $\neg \neg A$。然而，在直觉逻辑中，我们只能证明该等价关系的一半，即 $A$ 蕴涵 $\neg \neg A$。

```agda
¬¬-intro : ∀ {A : Set}
  → A
    -----
  → ¬ ¬ A
¬¬-intro x  =  λ{¬x → ¬x x}
```

在这个定义中，$x$ 是 $A$ 的证据。我们要证明假设 $\neg A$ 成立会导出矛盾，因此 $\neg \neg A$ 必定成立。我们构造了一个函数，它将 $\neg A$ 的证据（即 $¬x$）应用到 $x$ 上，得出矛盾。这证明了 $\neg \neg A$ 成立。

同样的证明可以写得更紧凑：

```agda
¬¬-intro′ : ∀ {A : Set}
  → A
    -----
  → ¬ ¬ A
¬¬-intro′ x ¬x = ¬x x
```

在这里，我们简单地将 $\lambda$ 表达式的参数转换成了该函数的额外参数。这种形式更加紧凑，通常使用后者。

#### 双重否定消除

虽然在直觉逻辑中无法证明 $\neg \neg A$ 蕴涵 $A$，但可以证明 $\neg \neg \neg A$ 蕴涵 $\neg A$。

```agda
¬¬¬-elim : ∀ {A : Set}
  → ¬ ¬ ¬ A
    -------
  → ¬ A
¬¬¬-elim ¬¬¬x  =  λ x → ¬¬¬x (¬¬-intro x)
```

在这个定义中，$¬¬¬x$ 是 $\neg \neg \neg A$ 的证据。我们要证明假设 $A$ 成立会导出矛盾，因此 $\neg A$ 必定成立。我们通过 $\neg \neg$ 导入证明 $\neg \neg A$，然后应用 $¬¬¬x$，得到矛盾。这证明了 $\neg A$ 成立。

#### 换质换位律（Contraposition）

换质换位律是另一个重要的逻辑规则，它陈述了如果 $A$ 蕴涵 $B$，那么 $\neg B$ 蕴涵 $\neg A$。

```agda
contraposition : ∀ {A B : Set}
  → (A → B)
    -----------
  → (¬ B → ¬ A)
contraposition f ¬y x = ¬y (f x)
```

在这个定义中，$f$ 是 $A \rightarrow B$ 的证据，$¬y$ 是 $\neg B$ 的证据。我们要证明假设 $A$ 成立会导出矛盾，因此 $\neg A$ 必定成立。通过应用 $f$ 到 $x$，我们从 $A \rightarrow B$ 和 $A$ 得到 $B$。然后应用 $¬y$ 到 $B$，得出矛盾。这样，我们就证明了 $\neg A$。

通过这些内容，我们理解了在直觉逻辑中，否定是如何通过蕴涵假来形式化的，以及双重否定和换质换位律的应用。如果你对这些概念有进一步的疑问或需要更多的解释，请随时告诉我。