[TOC]

冲突域和广播域
在介绍这三个设备的异同之前，我们首先需要了解冲突域和广播域的概念：

什么是冲突？

图一

我们把上图的以太网想象为走廊，各个主机想象为每个人的卧室。有一天，小宇想去找凯皇玩儿，同时大碧哥想去找阿呆玩儿，但是走廊（以太网通道）一次只能容纳一个人。于是小宇谦让的让大碧哥先去，等到大碧哥进入了阿呆的房间，小宇再出发去找凯皇。 通道只能过一个人，小宇和大碧哥在通道里不期而遇这就是冲突
冲突域：
连接在同一导线上的所有工作站的集合，或者说是同一物理网段上所有节点的集合或以太网上竞争同一带宽的节点集合。这个域代表了冲突在其中发生并传播的区域。在OSI模型中，冲突域被看作是第一层的概念，连接同一冲突域的设备有Hub，Reperter或者其他进行简单复制信号的设备。也就是说，用Hub（集线器）或者Repeater（中继器）连接的所有节点可以被认为是在同一个冲突域内，它不会划分冲突域。而第二层设备（网桥，交换机）第三层设备（路由器）都可以划分冲突域的，当然也可以连接不同的冲突域。简单的说，可以将Repeater等看成是一根电缆，而将网桥等看成是一束电缆。
什么是广播？
网络中的广播就好像我们大商场里的广播一样，你一开口，全商场的人都听到了。比图上图中阿呆想跟大碧哥聊天，通话以广播的形式发送，那么他们的聊天内容局域网上所有人都看得到。
广播域：接收同样广播消息的节点的集合。如：在该集合中的任何一个节点传输一个广播帧，则所有其他能收到这个帧的节点都被认为是该广播帧的一部分。由于许多设备都极易产生广播，所以如果不维护，就会消耗大量的带宽，降低网络的效率。由于广播域被认为是OSI中的第二层概念，所以象Hub，交换机等第一，第二层设备连接的节点被认为都是在同一个广播域。而路由器，第三层交换机则可以划分广播域，即可以连接不同的广播域。
联网中继设备
将网络互相连接起来要使用一些中间设备（或中间系统），OSI的术语称之为中继（relay）系统。根据中继系统所在的层次，可以有以下五种中继系统：
1.物理层（即常说的第一层、层L1）中继系统，即转发器（repeater）或集线器（hub）。
2.数据链路层（即第二层，层L2），即交换机(switch)或网桥（bridge）。
3.网络层（第三层，层L3）中继系统，即路由器（router）。
4.网桥和路由器的混合物桥路器（brouter）兼有网桥和路由器的功能。
5.在网络层以上的中继系统，即网关（gateway）。

集线器（hub）
为什么要使用集线器？
HUB是一个多端口的转发器，当以HUB为中心设备时，网络中某条线路产生了故障，并不影响其它线路的工作。所以HUB在局域网中得到了广泛的应用。大多数的时候它用在星型与树型网络拓扑结构中，如下图所示。我们使用集线器为我们创造了多种多样的网络拓扑结构

图二
定义：集线器（Hub）是指将多条以太网双绞线或光纤集合连接在同一段物理介质下的设备。集线器是运作在OSI模型中的物理层。它可以视作多端口的中继器，若它侦测到碰撞，它会提交阻塞信号。
特点：
集线器最大的特点就是采用共享型模式，就是指在有一个端口在向另一个端口发送数据时，其他端口就处于“等待”状态。为什么会“等待”呢？举个例子来说，其实在单位时间内A向B发送数据包时，A是发送给B、C、D三个端口的（该现象即紧接下文介绍的IP广播），但是只有B接收，其他的端口在第一单位时间判断不是自己需要的数据后将不会再去接收A发送来的数据。直到A再次发送IP广播，在A再次发送IP广播之前的单位时间内，C，D是闲置的，或者CD之间可以传输数据。如图1，我们可以理解为集线器内部只有一条通道（即公共通道），然后在公共通道下方就连接着所有端口。
交换机(switch)
为什么要使用交换机：
我们使用hub连接局域网的时候，如果局域网内的主机高达上千台，那么会变得冲突域就会很大，很容易造成网络的堵塞。所以就有人设想能不能找个设备来阻断这个大的冲突域，将其划分为各个小的冲突域。这样就能优化网络性能了。
定义：交换机(Switch)是一种基于MAC（网卡的硬件地址）识别，能完成封装转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。交换机分为：二层交换机，三层交换机或是更高层的交换机。三层交换机同样可以有路由的功能，而且比低端路由器的转发速率更快。它的主要特点是：一次路由，多次转发。
特点：

图三

我们把上图左边的网段成为网段A（包含阿呆和大碧哥），右边的网段成为网段B(包含凯皇和小宇)。
网段A的主机阿呆想要给大碧哥发消息，交换机不会转发这个MAC帧，因为他识别到了这是网段A内部之间的通信。同理，网段B凯皇发给小宇也是一样的。也就是说，我们利用交换机将一个冲突域划分为两个冲突域，并且这两个冲突域共享自己的总信道带宽。
如果主机阿呆发送了一个目标是所有主机的广播类型数据包时，交换机要转发这样的数据包。交换机两侧的两个网段总线上的所有主机都要接收该广播数据包。因此，网段A和网段B仍属于同一个广播域。
简单来说，也就是使用交换机切割了冲突域，没有切割广播域。
路由器(route)
定义：工作在OSI第三层(网络层)上、并且有连接不同类型网络的能力并能够选择数据传送路径的网络设备。
功能：路由器工作在网络层，可以识别网络层的地址-IP地址，有能力过滤第3层的广播消息。实际上，除非做特殊配置，否则路由器从不转发广播类型的数据包。因此，路由器的每个端口所连接的网络都独自构成一个广播域。

图四
特点：图四中是用路由器连接了网段一和网段二，路由器的每个端口所连接的网络都独自构成一个广播域。所以我们可以知道路由器切分了冲突域和广播域。
三者的异同
1）工作层次不同
路由器工作在网络层（第三层）
交换机一般工作在数据链路层（第二层）
集线器一般工作在物理层（第一层）
2）数据转发依据对象不同
交换机是利用物理地址或者说MAC地址来确定转发数据的目的地址。MAC地址通常是硬件自带的，由网卡生产商来分配的，而且已经固化到了网卡中去，一般来说是不可更改的。
路由器则是利用不同网络的IP地址来确定数据转发的地址。IP地址是在软件中实现的，描述的是设备所在的网络，有时这些第三层的地址也称为协议地址或者网络地址。
3）分割冲突域，广播域
集线器既不能分割冲突域也不能分割广播域，它就像一根接口比较多的网线一样。
交换机只能分割冲突域不能分割广播域。交换机连接的网段仍属于同一个广播域，广播数据包会在交换机连接的所有网段上传播，在某些情况会导致通信拥堵和安全漏洞。
路由器既分割了冲突域又分割了广播域。连接到路由器上的网段会被分配成不同的广播域，广播数据不会穿过路由器。
4）防火墙功能
路由器利用自己强大的功能可以实现流量控制和上网功能控制而交换机和集线器没有防火墙这么强大的功能。

参考文献
1.via 百度
2. via 网络设备与冲突域和广播域



https://blog.csdn.net/gui951753/article/details/79402528