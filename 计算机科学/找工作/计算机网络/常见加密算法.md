[常见三种加密（MD5、非对称加密，对称加密）](https://www.cnblogs.com/shoshana-kong/p/10934550.html)

#  

转载。 https://blog.csdn.net/SSY_1992/article/details/79094556

任何应用的开发中安全都是重中之重，在信息交互异常活跃的现在，信息加密技术显得尤为重要。在app应用开发中，我们需要对应用中的多项数据进行加密处理，从而来保证应用上线后的安全性，给用户一个安全保障。 
本节只讲原理和应用，具体的代码请到[这里下载](https://github.com/MichaelSSY/CodeTool/tree/master)，都是封装好的工具类，包括终端命令操作。下面介绍常用三种加密。

*一、哈希HASH*

1.MD5加密

MD5加密的特点：

1. 不可逆运算
2. 对不同的数据加密的结果是定长的32位字符（不管文件多大都一样）
3. 对相同的数据加密，得到的结果是一样的（也就是复制）。
4. 抗修改性 : 信息“指纹”，对原数据进行任何改动,哪怕只修改一个字节,所得到的 MD5 值都有很大区别.
5. 弱抗碰撞 : 已知原数据和其 MD5 值,想找到一个具有相同 MD5 值的数据(即伪造数据)是非常困难的.
6. 强抗碰撞: 想找到两个不同数据,使他们具有相同的 MD5 值,是非常困难的

MD5 应用:

一致性验证：MD5将整个文件当做一个大文本信息，通过不可逆的字符串变换算法，产生一个唯一的MD5信息摘要，就像每个人都有自己独一无二的指纹,MD5对任何文件产生一个独一无二的数字指纹。

那么问题来了，你觉得这个MD5加密安全吗？其实是不安全的，不信的话可以到这个网站试试：[md5破解网站](http://www.cmd5.com/)。可以说嗖地一下就破解了你的MD5加密！！！

2.加“盐”

可以加个“盐”试试，“盐”就是一串比较复杂的字符串。加盐的目的是加强加密的复杂度，这么破解起来就更加麻烦，当然这个“盐”越长越复杂，加密后破解起来就越麻烦，不信加盐后然后MD5加密，再去到[md5破解网站](http://www.cmd5.com/)破解试试看，他就没辙了！！！

哈哈，这下应该安全了吧！答案是否定的。如果这个“盐”泄漏出去了，不还是完犊子吗。同学会问，“盐”怎么能泄漏出去呢？其实是会泄漏出去的。比如苹果端、安卓端、前端、后台等等那些个技术人员不都知道吗。。都有可能泄漏出去。又有同学说那就放在服务器吧，放在服务器更加不安全，直接抓包就抓到了！！！

加固定的“盐”还是有太多不安全的因素，可以看出没有百分百的安全，只能达到相对安全（破解成本 > 破解利润），所以一些金融的app、网站等加密比较高。

下面来介绍另外两种加密方案

3.SHA加密

安全哈希算法（Secure Hash Algorithm）主要适用于数字签名标准（Digital Signature Standard DSS）里面定义的数字签名算法（Digital Signature Algorithm DSA）。对于长度小于2^64位的消息，SHA1会产生一个160位的消息摘要。当接收到消息的时候，这个消息摘要可以用来验证数据的完整性。在传输的过程中，数据很可能会发生变化，那么这时候就会产生不同的消息摘要。当让除了SHA1还有SHA256以及SHA512等。

SHA1有如下特性：不可以从消息摘要中复原信息；两个不同的消息不会产生同样的消息摘要。

4.HMAC加密

HMAC：给定一个密钥，对明文加密，做两次“散列”，得到的结果还是32为字符串。在实际开发中，密钥是服务器生成，客户端发送请求会拿到KEY。一个账号对应一个KEY

以注册为例：当用户把账号提交给服务器，服务器会验证账号的合法性，如果合法就会生成个KEY给客户端（这个KEY只有在注册的时候会出现一次，一个账号只对应一个KEY）；客户端会用拿到的KEY给密码用HMAC方式加密（32位字符串）发给服务器，最终服务器会保存这个HMAC密码。这样就注册成功了！以后再登录就会服务器就会比对这个HMAC密码是否相等决定能否登录成功。

![这里写图片描述](https://tva1.sinaimg.cn/large/0081Kckwly1glmojntdqdj308c052wfs.jpg)

这样一来好像安全了很多哎！即使黑客拿到了客户KEY，也只能拿到一个用户的信息，也就是说只丢失了一个客户的信息。然而上面的加“盐”方式加密，如果“盐”泄漏了，那丢失的可是所有用户信息啊。安全性有了很大提升有木有！！！

但是这还是不够安全，还可以更佳安全！

以登录为例：当用户点击登录时，会生成HMAC密码，然后用HMAC密码拼接上一个时间串（服务器当前时间，201801171755，只到分钟），然后一起MD5加密，最后客户端会把加上时间的HMAC值发给服务器；这时候服务器也会用已经存起来的HMAC密码拼接上一个时间串（服务器当前时间），然后一起MD5加密，最后用这个加密后的HMAC值和客户端发来的进行HMAC值对比，对此一样则登录成功！！！

![这里写图片描述](https://tva1.sinaimg.cn/large/0081Kckwly1glmojmvpcmj308c05wmyq.jpg)

疑问1.为什么一定要用服务器的时间呢？ 
答：因为客户端可能会修改自己的手机时间，以服务器为准比较好。 
疑问2.如果网络有延迟怎么办？ 
答：这里服务器可以对比两次，再往后加一分钟对比一次。试想一下如果网络延迟了两分钟，还没请求到时间，那这个网络也是够了！！！ 
疑问3.为什么不让服务器直接修改KEY呢？ 
答：这样也能保证每次登录的HMAC值不一样？注意：这样做服务器会频繁的更新KEY，加大服务器的压力，一般不会去更新，除非更换密码才会更新。当然服务器可以定期去更新KEY，这样安全等级又会提高，更加安全！！

这个时候如果黑客拦截到了你加了时间戳的HMAC值，不能在两分钟内破解密码，那么他就永远登不进去了。这个密码的破解难度是很大的，代价也高，这样是不是就很安全了，是的，这样就更加安全！！！

*二、对称加密*

简介： 
对称加密算法又称传统加密算法。 
加密和解密使用同一个密钥。

加密解密过程：明文->密钥加密->密文，密文->密钥解密->明文。

示例： 
密钥：X 
加密算法：每个字符+X 
明文：Hello 
密钥为 1时加密结果：Ifmmp 
密钥为 2时加密结果：Jgnnq

优缺点： 
算法公开，计算量小，加密速度快，加密效率高 
双方使用相同的钥匙，安全性得不到保证

注意事项： 
密钥的保密工作非常重要 
密钥要求定期更换

经典加密算法有三种： 
\1. DES(Data Encryption Standard)：数据加密标准(现在用的比较少，因为它的加密强度不够，能够暴力破解) 
\2. 3DES：原理和DES几乎是一样的，只是使用3个密钥，对相同的数据执行三次加密，增强加密强度。(缺点：要维护3个密钥，大大增加了维护成本) 
\3. AES(Advanced Encryption Standard)：高级加密标准，目前美国国家安全局使用的，苹果的钥匙串访问采用的就AES加密。是现在公认的最安全的加密方式，是对称密钥加密中最流行的算法。

加密模式： 
ECB：电子密码本，就是每个块都是独立加密

![这里写图片描述](https://tva1.sinaimg.cn/large/0081Kckwly1glmojk2vn1j30cj07awge.jpg)

CBC：密码块链，使用一个密钥和一个初始化向量(IV)对数据执行加密转换

![这里写图片描述](https://tva1.sinaimg.cn/large/0081Kckwly1glmojj4ljxj30eo07tq4o.jpg)

只要是对称加密都有 ECB和 CBC模式，加密模式是加密过程对独立数据块的处理。对于较长的明文进行加密需要进行分块加密，在实际开发中，推荐使用CBC的，ECB的要少用。

*三、非对称加密RSA*

简介： 
\1. 对称加密算法又称现代加密算法。 
\2. 非对称加密是计算机通信安全的基石，保证了加密数据不会被破解。 
\3. 非对称加密算法需要两个密钥：公开密钥(publickey) 和私有密(privatekey) 
\4. 公开密钥和私有密钥是一对

如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密。 
如果用私有密钥对数据进行加密，只有用对应的公开密钥才能解密。

特点： 
算法强度复杂，安全性依赖于算法与密钥。 
加密解密速度慢。

与对称加密算法的对比： 
对称加密只有一种密钥，并且是非公开的，如果要解密就得让对方知道密钥。 
非对称加密有两种密钥，其中一个是公开的。

RSA应用场景： 
由于RSA算法的加密解密速度要比对称算法速度慢很多，在实际应用中，通常采取 
数据本身的加密和解密使用对称加密算法(AES)。 
用RSA算法加密并传输对称算法所需的密钥。



---

# **1.分类**

加密算法首先分为两种：单向加密、双向加密。

单向加密是不可逆的，也就是只能加密，不能解密。通常用来传输类似用户名和密码，直接将加密后的数据提交到后台，因为后台不需要知道用户名和密码，可以直接将收到的加密后的数据存储到数据库。

**双向加密算法通常分为对称性加密算法和非对称性加密算法，**对于对称性加密算法，信息接收双方都需事先知道密匙和加解密算法且其密匙是相同的，之后便是对数据进行 加解密了。非对称算法与之不同，发送双方A,B事先均生成一堆密匙，然后A将自己的公有密匙发送给B，B将自己的公有密匙发送给A，如果A要给B发送消 息，则先需要用B的公有密匙进行消息加密，然后发送给B端，此时B端再用自己的私有密匙进行消息解密，B向A发送消息时为同样的道理。

# 2对称加密和非对称加密的区别以及应用。

**对称加密：双方使用的同一个密钥，既可以加密又可以解密，这种加密方法称为对称加密，也称为单密钥加密。**

**优点：**速度快，对称性加密通常在消息发送方需要加密大量数据时使用，算法公开、计算量小、加密速度快、加密效率高。

**缺点：**在数据传送前，发送方和接收方必须商定好秘钥，然后 使双方都能保存好秘钥。其次如果一方的秘钥被泄露，那么加密信息也就不安全了。另外，每对用户每次使用对称加密算法时，都需要使用其他人不知道的唯一秘 钥，这会使得收、发双方所拥有的钥匙数量巨大，密钥管理成为双方的负担。

在对称加密算法中常用的算法有：DES、AES等。

AES：密钥的长度可以为128、192和256位，也就是16个字节、24个字节和32个字节

DES：密钥的长度64位，8个字节。

**非对称加密：一对密钥由公钥和私钥组成（可以使用很多对密钥）。私钥解密公钥加密数据，公钥解密私钥加密数据（私钥公钥可以互相加密解密）。**

私钥只能由一方保管，不能外泄。公钥可以交给任何请求方。

在非对称加密算法中常用的算法有： 

RSA、Elgamal、背包算法、Rabin、Diffie-Hellman、ECC（椭圆曲线加密算法）。
使用最广泛的是RSA算法，Elgamal是另一种常用的非对称加密算法。

**缺点：**速度较慢

**优点：**安全

# 3 **常用算法**

**几种对称性加密算法：AES,DES,3DES**

1 、DES是一种分组数据加密技术（先将数据分成固定长度的小数据块，之后进行加密），速度较快，适用于大量数据加密，

2、 而3DES是一种基于DES的加密算法，使用3个不同密匙对同一个分组数据块进行3次加密，如此以使得密文强度更高。

3、 相较于DES和3DES算法而言，AES算法有着更高的速度和资源使用效率，安全级别也较之更高了，被称为下一代加密标准。

**几种非对称性加密算法：RSA,DSA,ECC**

RSA和DSA的安全性及其它各方面性能都差不多，而ECC较之则有着很多的性能优越，包括处理速度，带宽要求，存储空间等等。

**几种线性散列算法（签名算法）：MD5,SHA1,HMAC**

这几种算法只生成一串不可逆的密文，经常用其效验数据传输过程中是否经过修改，**因为相同的生成算法对于同一明文只会生成唯一的密文，若相同算法生成的密文不同，则证明传输数据进行过了修改。**通常在数据传说过程前，使用MD5和SHA1算法均需要发送和接收数据双方在数据传送之前就知道密匙生成算法，而HMAC与之不同的是需要生成一个密匙，发送方用此密匙对数据进行摘要处理（生成密文），接收方再利用此密匙对接收到的数据进行摘要处理，再判断生成的密文是否相同。

---

