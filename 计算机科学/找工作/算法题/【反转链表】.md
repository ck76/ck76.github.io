[TOC]

- https://leetcode.cn/problems/reverse-linked-list-ii/solution/by-lfool-zzcv/

# [å¦‚æœæƒ³è¦æŸ¥çœ‹ä½œè€…æ›´å¤šæ–‡ç« ï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„ï¼ï¼ï¼ğŸ”¥ğŸ”¥ğŸ”¥](https://leetcode.cn/link/?target=https%3A%2F%2Flfool.github.io%2FLFool-Notes%2F)

# [ä¸ºäº†æœ¬ç¯‡æ–‡ç« æ›´å¥½çš„è§‚æ„Ÿï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„ï¼ï¼ï¼](https://leetcode.cn/link/?target=https%3A%2F%2Flfool.github.io%2FLFool-Notes%2Falgorithm%2Fåè½¬é“¾è¡¨.html)

[206. åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list/)

[92. åè½¬é“¾è¡¨ II](https://leetcode-cn.com/problems/reverse-linked-list-ii/)

[25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-nodes-in-k-group/)

------

è¿™æ˜¯è¿™æ˜¯è¿™æ˜¯æœ€æœ€æœ€åŸºç¡€çš„ä¸€ä¸ªé¢˜ç›®ï¼Œä¹Ÿæ˜¯å‡ºç°é¢‘ç‡æœ€é«˜çš„ä¸€ä¸ªé¢˜ç›®

æ„Ÿè§‰æ¯æ¬¡éƒ½æ˜¯ç¨€é‡Œç³Šæ¶‚çš„æŠŠå®ƒå†™å‡ºæ¥çš„ï¼Œä½†æ˜¯è¿‡å¾ˆé•¿æ—¶é—´é‡æ–°å»å†™çš„è¯ï¼Œåˆä¼šå˜å¾—ç”Ÿç–å¾ˆå¤š

ä»Šå¤©å°±ç—›å®šæ€ç—›ï¼ŒæŠŠè¿™ä¸€ä¸ªç±»å‹çš„é¢˜ç›®å¥½å¥½æ¢³ç†ä¸€ä¸‹

## åè½¬æ•´ä¸ªé“¾è¡¨

é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€çœ‹æœ€æœ€æœ€åŸºç¡€çš„ä¸€ç§æ–¹å¼ï¼Œåè½¬æ•´ä¸ªé“¾è¡¨ï¼Œ**é¢˜ç›®è¯¦æƒ…å¯è§ [åè½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-linked-list/)**ã€‚è¿™é‡Œå°†ç»™å‡ºä¸¤ç§æ–¹å¼ï¼šã€Œè¿­ä»£ã€å’Œã€Œé€’å½’ã€

![1319221649222362otf6Yyrev1ex1.jpeg](https://tva1.sinaimg.cn/large/e6c9d24egy1h6714hwrkvj20f2066q33.jpg)

### å…ˆä»‹ç»è¿­ä»£å§å§å§å§ï¼ï¼ï¼

![1342401649223760Xdg.svg](https://pic.leetcode-cn.com/1649654231-UALoei-1342401649223760Xdg.svg)

![image-20220915102534686](https://tva1.sinaimg.cn/large/e6c9d24egy1h6715m30hyj21ey0u041u.jpg)

```java
// è¿­ä»£
public ListNode reverse(ListNode head) {
    ListNode prev, curr, next;
    // åˆšåˆšå¼€å§‹ï¼Œåªæœ‰ curr æ˜¯æœ‰å…·ä½“å€¼çš„
    // prev && next å‡ä¸ºç©º
    prev = null;
    curr = head;
    next = null;
    
    while (curr != null) {
        // é¦–å…ˆæˆ‘ä»¬éœ€è¦è®°å½•ä¸‹ curr.next çš„å€¼
        // åŸå› ï¼šä¸‹ä¸€æ­¥ æˆ‘ä»¬ä¼šæ”¹å˜ curr.next çš„å€¼ï¼Œä½†æ˜¯åŸæ¥çš„ curr.next çš„å€¼åœ¨åé¢ä¾ç„¶ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥éœ€è¦è®°å½•ä¸€ä¸‹
        next = curr.next;
        // æ”¹å˜ curr.next çš„å€¼æŒ‡å‘ prevï¼Œåè½¬æŒ‡é’ˆæ–¹å‘
        curr.next = prev;
        
        // å‰è¿›ï¼šprev, curr å‡å‘å‰è¿›ä¸€æ­¥
        prev = curr;
        curr = next;
    }
    return prev;
}
```

### ä¸‹é¢ä»‹ç»ç¬¬äºŒç§é€’å½’æ–¹å¼

å†é€’å½’ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å‡ ä¸ªå†…å®¹ï¼Œå³é€’å½’å››ä»¶å¥—ï¼Œæ˜ç¡® ã€Œå½“å‰èŠ‚ç‚¹ã€ã€Œè¯¥åšä»€ä¹ˆã€ã€Œä»€ä¹ˆæ—¶å€™åšã€ã€Œæ³¨æ„è¿”å›å€¼ã€

- å½“å‰èŠ‚ç‚¹ï¼šhead èŠ‚ç‚¹
- è¯¥åšä»€ä¹ˆï¼šå…·ä½“çœ‹ä¸‹å›¾
- ä»€ä¹ˆæ—¶å€™åšï¼šååº
- æ³¨æ„è¿”å›å€¼ï¼šå­é“¾è¡¨å®Œæˆåè½¬åçš„å¤´èŠ‚ç‚¹

![1.svg](https://pic.leetcode-cn.com/1652112212-IctheT-1.svg)

æ‰§è¡Œå®Œ `reverse(head.next)` åï¼Œç»“æœå¦‚ä¸‹

![2.svg](https://pic.leetcode-cn.com/1652112217-VydnzG-2.svg)

![image-20220915102545624](https://tva1.sinaimg.cn/large/e6c9d24egy1h6715szkkvj214i0hmjt2.jpg)

æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¯¹å½“å‰èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ head èŠ‚ç‚¹åšçš„å°±æ˜¯ï¼š`head.next.next = head; head.next = null;`

```java
// é€’å½’
public ListNode reverse(ListNode head) {
    // if (head == null) è¯´æ˜é“¾è¡¨ä¸º null
    // if (head.next == null) è¯´æ˜æ­¤æ—¶çš„ head èŠ‚ç‚¹ä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹
    if (head == null || head.next == null) return head;
    // éå†
    ListNode last = reverse(head.next);
    // ååº
    head.next.next = head;
    head.next = null;
    // æ³¨æ„ï¼šæ°¸è¿œè¿”å›çš„æ˜¯æœ€åº•å±‚é€’å½’çš„ç»“æœã€‚é€’å½’ä¸­é€”ï¼Œè¿”å›å€¼æ˜¯æ²¡æœ‰æ”¹å˜çš„
    return last; 
}
```

## åè½¬é“¾è¡¨å‰ N ä¸ªå…ƒç´ 

### å…ˆä»‹ç»è¿­ä»£å§å§å§å§ï¼ï¼ï¼

![11111.svg](https://pic.leetcode-cn.com/1649654265-UCxEwj-11111.svg)

![image-20220915102524405](https://tva1.sinaimg.cn/large/e6c9d24egy1h6715fea75j20xi0bowfh.jpg)

åè½¬å‰ 4 ä¸ªå…ƒç´ ï¼Œæœ‰æ²¡æœ‰å¾ˆç›¸ä¼¼çš„æ„Ÿè§‰ï¼Œå°±æ˜¯æ”¹å˜äº†ç»“æŸçš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚å¯¹äºåè½¬æ•´ä¸ªé“¾è¡¨ï¼Œç»“æŸå…ƒç´ æ˜¯æœ€åä¸€ä¸ª `null`ï¼›è€Œå¯¹äºåè½¬å‰ `N` ä¸ªå…ƒç´ ï¼Œç»“æŸå…ƒç´ æ˜¯ç¬¬ `N + 1` ä¸ªå…ƒç´ ï¼Œå³æœ€åˆæ—¶åº”è¯¥ `prev = 5`

æˆ‘ä»¬éœ€è¦å…ˆè¿›è¡Œä¸€ä¸ªéå†ï¼Œå¾—åˆ°ç¬¬äº”ä¸ªèŠ‚ç‚¹

æ‰€ä»¥è¿­ä»£çš„ä»£ç ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†

```java
// è¿­ä»£
public ListNode reverseN(ListNode head, int n) {
    // è·å¾—å³è¾¹ç•ŒèŠ‚ç‚¹
    ListNode rightNode = null;
    ListNode p = head;
    int count = 0;
    while (p != null) {
        count++;
        if (count == n + 1) {
            rightNode = p;
            break;
        }
        p = p.next;
    }
    ListNode prev, curr, next;
    prev = rightNode;
    curr = head;
    next = null;
    
    // æ­¤å¤„ä¹Ÿéœ€è¦éšä¹‹å˜åŒ–ï¼Œåˆ° rightNode å³åœæ­¢
    while (curr != rightNode) {
        next = curr.next;
        curr.next = prev;
        
        prev = curr;
        curr = next;
    }
    return prev;
}
```

### ä¸‹é¢ä»‹ç»ç¬¬äºŒç§é€’å½’æ–¹å¼

ã€Œåè½¬é“¾è¡¨å‰ `N` ä¸ªå…ƒç´ ã€å’Œã€Œåè½¬æ•´ä¸ªé“¾è¡¨ã€å…¶å®å‰é¢éƒ½ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„å°±æ˜¯ç»“æŸæ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯ base case ä¸ä¸€æ ·

å¯¹äºã€Œåè½¬æ•´ä¸ªé“¾è¡¨ã€ï¼Œbase case ä¸º `head.next = null`ï¼›è€Œå¯¹äºã€Œåè½¬é“¾è¡¨å‰ N ä¸ªå…ƒç´ ã€ï¼Œbase case ä¸º `head.next = the Node of (N+1)th`

å…ˆç›´æ¥çœ‹ä»£ç ï¼š

```java
private ListNode successor = null;
public ListNode reverseN(ListNode head, int n) {
    if (n == 1) {
        // è®°å½• the Node of (N+1)th
        // å› ä¸ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹æœ€åéœ€è¦æ¥ä¸Šå»
        successor = head.next;
        return head;
    }
    ListNode last = reverseN(head.next, n - 1);
    head.next.next = head;
    head.next = successor;
    return last;
}
```

## åè½¬é“¾è¡¨åŒºé—´ [m, n] çš„å…ƒç´ 

**é¢˜ç›®è¯¦æƒ…å¯è§ [åè½¬é“¾è¡¨ II](https://leetcode-cn.com/problems/reverse-linked-list-ii/)**

### å…ˆä»‹ç»è¿­ä»£å§å§å§å§ï¼ï¼ï¼

![2323.svg](https://pic.leetcode-cn.com/1649654313-ElSBuy-2323.svg)

![image-20220915102515765](https://tva1.sinaimg.cn/large/e6c9d24egy1h6715aa195j20ts0euab5.jpg)

åè½¬ç¬¬ 2-4 ä¸ªå…ƒç´ ï¼Œæœ‰æ²¡æœ‰æ›´åŠ ç†Ÿæ‚‰çš„æ„Ÿè§‰ï¼Œè¿™ç§æƒ…å†µä¸ä»…æ”¹å˜äº†ç»“æŸçš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè€Œä¸”æ”¹å˜äº†èµ·å§‹çš„å…ƒç´ ã€‚å¯¹äºåè½¬æ•´ä¸ªé“¾è¡¨ï¼Œèµ·å§‹å…ƒç´ æ˜¯`head`ï¼Œç»“æŸå…ƒç´ æ˜¯æœ€åä¸€ä¸ª `null`ï¼›è€Œå¯¹äºåè½¬å‰ N ä¸ªå…ƒç´ ï¼Œèµ·å§‹å…ƒç´ æ˜¯ `head`ï¼Œç»“æŸå…ƒç´ æ˜¯ç¬¬ `N + 1` ä¸ªå…ƒç´ ï¼›è€Œå¯¹äºåè½¬åŒºé—´ `[m, n]` çš„å…ƒç´ ï¼Œèµ·å§‹å…ƒç´ æ˜¯ç¬¬ `m - 1` ä¸ªå…ƒç´ ï¼Œç»“æŸå…ƒç´ æ˜¯ç¬¬ `n + 1` ä¸ªå…ƒç´ 

æ‰€ä»¥è¿­ä»£çš„ä»£ç ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†

```java
public ListNode reverseBetween(ListNode head, int m, int n) {
    ListNode beginNode = null;
    ListNode endNode = null;
    ListNode p = head;
    int count = 0;
    while (p != null) {
        count++;
        if (count == m - 1) beginNode = p;
        if (count == n + 1) {
            endNode = p;
            break;
        }
        p = p.next;
    }
    // ç»“æŸå…ƒç´ æ˜¯ç¬¬ n+1 ä¸ª
    ListNode prev = endNode;
    // ç»“æŸå…ƒç´ æ˜¯ç¬¬ m-1 ä¸ª
    // è¿™é‡Œéœ€è¦å¯¹ä¸€ç§ç‰¹æ®Šæƒ…å†µè¿›è¡Œåˆ¤æ–­ï¼Œå³ m=1 çš„æƒ…å†µ
    // å½“ m=1 æ—¶ï¼ŒbeginNode = null
    // æ­¤æ—¶èµ·å§‹å…ƒç´ åº”è¯¥ç›´æ¥ä¸º head
    // å¦åˆ™ï¼Œèµ·å§‹å…ƒç´ åº”è¯¥ä¸º beginNode.next
    ListNode curr = beginNode == null ? head : beginNode.next;
    ListNode next = null;
    while (curr != endNode) {
        next = curr.next;
        curr.next = prev;
        prev = curr;
        curr = next;
    }
    // åŒç†ï¼Œå¦‚æœ beginNode = nullï¼Œã€Œåè½¬åçš„å¤´èŠ‚ç‚¹ã€ç›´æ¥ä¸º prevï¼Œå’Œåè½¬æ•´ä¸ªé“¾è¡¨åŒç†
    // å¦åœ¨ï¼Œéœ€è¦æŠŠ beginNode å’Œã€Œåè½¬åçš„å¤´èŠ‚ç‚¹ã€è¿æ¥èµ·æ¥
    if (beginNode == null) return prev;
    beginNode.next = prev;
    return head;
}
```

### ä¸‹é¢ä»‹ç»ç¬¬äºŒç§é€’å½’æ–¹å¼

ã€Œåè½¬é“¾è¡¨åŒºé—´ `[m, n]` çš„å…ƒç´ ã€å’Œã€Œåè½¬é“¾è¡¨å‰ `N` ä¸ªå…ƒç´ ã€å…¶å®å°±æ˜¯å¼€å§‹èŠ‚ç‚¹ä¸ä¸€æ ·è€Œå·²

å…ˆç›´æ¥çœ‹ä»£ç ï¼š

```java
public ListNode reverseBetween(ListNode head, int m, int n) {
    if (m == 1) {
        // ç›´æ¥è°ƒç”¨ reverseN() æ–¹æ³•
        return reverseN(head, n);
    }
    head.next = reverseBetween(head.head, m - 1, n - 1);
    return head;
}
```

## K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨

ä»Šå¤© (2022-04-16 17:06:52) æ›´æ–°ä¸€ä¸‹æœ¬ç¯‡æ–‡ç« ï¼Œæ–°å¢ä¸€ä¸ªå†…å®¹ï¼Œå³ï¼šK ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ã€‚**é¢˜ç›®è¯¦æƒ…å¯è§ [K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode-cn.com/problems/reverse-nodes-in-k-group/)**

æ€è€ƒäº†å¾ˆä¹…ï¼Œæœ¬æ¥æƒ³ç”¨è¿­ä»£çš„æ–¹æ³•å»è§£å†³å®ƒï¼Œå¯æ˜¯é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚å¤„ç†ç¬¬ `i` ç»„çš„æ—¶å€™æ— æ³•è·å¾—ç¬¬ `i + 1` ç»„çš„å¤´èŠ‚ç‚¹ï¼Œå¦‚å›¾ï¼š

![1714321650100472iE8d4B1.svg](https://pic.leetcode-cn.com/1650458197-dXcWbB-1714321650100472iE8d4B1.svg)

![image-20220915102507344](https://tva1.sinaimg.cn/large/e6c9d24egy1h671558wl2j20qc08oaak.jpg)

è®¾ `k = 2`ï¼Œå½“æˆ‘ä»¬å¤„ç†èŠ‚ç‚¹ 1ã€2 çš„æ—¶å€™ï¼Œæœ€åæˆ‘ä»¬éœ€è¦æŠŠ 1 -> 4ï¼Œå¯æ˜¯æˆ‘ä»¬åœ¨å¤„ç† 1ã€2 çš„æ—¶å€™æš‚æ—¶æ— æ³•å¾—åˆ° 3ã€4 å¤„ç†å®Œçš„å¤´èŠ‚ç‚¹ 4

å¾ˆå®¹æ˜“å¯ä»¥æƒ³åˆ°ï¼Œå…¶å®è¿™å¾ˆç±»ä¼¼äºäºŒå‰æ ‘çš„åç»­éå†ã€‚å¤„ç†å½“å‰èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ç”¨åˆ°å­é—®é¢˜çš„ç»“æœ

ç›´æ¥ä¸Šä»£ç ï¼š

```java
public ListNode reverseKGroup(ListNode head, int k) {
    if (head == null) return null;
    ListNode start = head, end = head;
    for (int i = 0; i < k; i++) {
        // ä¸æ»¡ k ä¸ªï¼Œç›´æ¥è¿”å› head
        if (end == null) return start;
        end = end.next;
    }
    // ç¿»è½¬ [start, end)
    ListNode newHead = reverse(start, end);
    // ç¿»è½¬åï¼Œstart å˜æˆäº†å°¾èŠ‚ç‚¹
    // å°¾èŠ‚ç‚¹éœ€è¦æŒ‡å‘å­é—®é¢˜çš„å¤´èŠ‚ç‚¹
    start.next = reverseKGroup(end, k);
    // è¿”å›å½“å‰é—®é¢˜çš„å¤´èŠ‚ç‚¹
    return newHead;
}
// ç¿»è½¬ [start, end) åŒºé—´çš„é“¾è¡¨
private ListNode reverse(ListNode start, ListNode end) {
    ListNode prev = null;
    ListNode curr = start;
    ListNode next = null;
    while (curr != end) {
        next = curr.next;
        curr.next = prev;
        prev = curr;
        curr = next;
    }
    return prev;
}
```